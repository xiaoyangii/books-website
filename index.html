<!DOCTYPE html>
   <html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <!--=============== FAVICON ===============-->
      <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

      <!--=============== REMIXICONS ===============-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.css">

      <!--=============== SWIPER CSS ===============-->
      <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">

      <!--=============== CSS ===============-->
      <link rel="stylesheet" href="assets/css/styles.css">

      <!-- 引入样式 -->
      <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
      
      <title>图书借阅管理系统</title>
   </head>
   <body>
      <div>
         <!--==================== HEADER ====================-->
         <header class="header" id="header">
            <nav class="nav container">
               <a href="#" class="nav__logo">
                  <i class="ri-book-3-line"></i> 图书借阅管理系统
               </a>
               <div class="nav__menu">
                  <ul class="nav__list">
                     <li class="nav__item">
                        <a href="#home" class="nav__link active-link" title="主页">
                           <i class="ri-home-line"></i>
                           <span>主页</span>
                        </a>
                     </li>
                     <li class="nav__item">
                        <a href="#featured" class="nav__link">
                           <i class="ri-book-3-line"></i>
                           <span>书籍</span>
                        </a>
                     </li>
                     <li class="nav__item">
                        <a href="#discount" class="nav__link" title="其他">
                           <i class="ri-inbox-unarchive-line"></i>
                           <span>其他</span>
                        </a>
                     </li>
                     <li class="nav__item">
                        <a href="#new" class="nav__link" title="书库">
                           <i class="ri-bookmark-line"></i>
                           <span>书库</span>
                        </a>
                     </li>
                     <li class="nav__item">
                        <a href="#author" class="nav__link" title="作者">
                           <i class="ri-user-3-line"></i>
                           <span>作者</span>
                        </a>
                     </li>
                  </ul>
               </div>

               <div class="nav__actions">
                  <!-- Search button -->
                  <i class="ri-search-line search-button" id="search-button" title="搜索"></i>
                  
                  <!-- Login -->
                  <i class="ri-user-line login-button" id="login-button" title="登录"></i>

                  <!-- Theme button -->
                  <i class="ri-moon-line change-theme" id="theme-button" title="切换主题"></i>
               </div>
            </nav>
         </header>

         <!--==================== SEARCH ====================-->
         <div class="search" id="search-content">
            <form action="" class="search__form">
               <i class="ri-search-line search__icon"></i>
               <input type="search" placeholder="点我开始搜索" class="search__input">
            </form>

            <i class="ri-close-line search__close" id="search-close"></i>
         </div>

         <!--==================== LOGIN ====================-->
         <div class="login grid" id="login-content">
            <form action="" class="login__form grid">
               <h3 class="login_title">Log In</h3>

               <div class="login__group grid">
                  <div>
                     <lable class="login__lable" for="login-tel">邮箱</lable>
                     <input type="tel" placeholder="填写你的手机号码" id="login-tel" class="login__input">
                  </div>

                  <div>
                     <lable class="login__lable" for="login-pass">密码</lable>
                     <input type="password" placeholder="输入密码" id="login-pass" class="login__input">
                  </div>
               </div>

               <div>
                  <span class="login__signup">
                     还没有账号? <div id="go-regist" class="go__regist">注册</div>
                  </span>

                  <a href="#" class="login__forgot">
                     忘记密码?
                  </a>
                  <button type="submit" class="login__button button">登录</button>
               </div>
            </form>

            <i class="ri-close-line login__close" id="login-close"></i>
         </div>

         <!--==================== REGIST ====================-->
         <div class="regist grid" id="regist-content">
            <form action="" class="regist__form grid">
               <h3 class="regist_title">Regist</h3>

               <div class="regist__group grid">
                  <div>
                     <lable class="regist__lable" for="regist-tel">手机</lable>
                     <input type="tel" placeholder="填写你的手机号码" id="regist-tel" class="regist__input">
                  </div>

                  <div>
                     <lable class="regist__lable" for="regist-pass">密码</lable>
                     <input type="password" placeholder="输入密码" id="regist-pass" class="regist__input">
                  </div>
               </div>

               <div>
                  <span class="regist__login">
                     已有账号? <div id="go-login" class="go__login">登录</div>
                  </span>

                  <button type="submit" class="regist__button button">登录</button>
               </div>
            </form>

            <i class="ri-close-line regist__close" id="regist-close"></i>
         </div>

         <!--==================== MAIN ====================-->
         <main class="main" id="main">
            <!--==================== HOME ====================-->
            <section class="home section" id="home">
               <div class="home__container container grid">
                  <div class="home__data" id="borrowRecord">
                     <h1 class="home__title">
                        Browse & <br>
                        Select Books
                     </h1>

                     <p class="home__description">
                        从你最喜欢的作家那里找到最好的书籍，浏览数百本各种可能类别的书，享受阅读的乐趣。
                     </p>

                     <button @click="openTable" class="button watch">BorrowRecords</button>
                     <div class="button">记录总数：{{ recordCounts||'暂时无法获取' }}</div>
                  </div>

                  <div class="home__images">
                     <div class="home__swiper swiper">
                        <div class="swiper-wrapper">
                           <article class="home__article swiper-slide">
                              <img src="assets/img/home-book-1.png" alt="image" class="home__img">
                           </article>

                           <article class="home__article swiper-slide">
                              <img src="assets/img/home-book-2.png" alt="image" class="home__img">
                           </article>

                           <article class="home__article swiper-slide">
                              <img src="assets/img/home-book-3.png" alt="image" class="home__img">
                           </article>

                           <article class="home__article swiper-slide">
                              <img src="assets/img/home-book-4.png" alt="image" class="home__img">
                           </article>
                        </div>
                     </div>
                  </div>
               </div>
               <el-dialog title="借阅记录" :visible.sync="tableVisible">
                  <el-table :data="borrowRecords" :header-cell-style="{'text-align':'center'}" :cell-style="{ 'text-align': 'center' }" stripe fit>
                     <el-table-column property="RecordID" label="RecordID"></el-table-column>
                     <el-table-column property="BookID" label="BookID"></el-table-column>
                     <el-table-column property="BorrowDate" label="BorrowDate"></el-table-column>
                     <el-table-column property="ReturnDate" label="ReturnDate"></el-table-column>
                     <el-table-column property="DueDate" label="DueDate"></el-table-column>
                     <el-table-column property="IsOverdue" label="IsOverdue"></el-table-column>
                     <el-table-column property="UserID" label="UserID"></el-table-column>
                     <el-table-column property="BorrowerName" label="BorrowerName"></el-table-column>
                     <el-table-column label="操作" width="220">
                        <template slot-scope="scope">
                          <el-button
                           size="mini"
                           @click="handleEdit(scope.$index, scope.row)">编辑</el-button>
                        <el-button
                           size="mini"
                           type="primary"
                           @click="handleAdd(scope.$index, scope.row)">添加</el-button>
                          <el-button
                           size="mini"
                           type="danger"
                           @click="handleDelete(scope.$index, scope.row)">删除</el-button>
                        </template>
                      </el-table-column>
                  </el-table>
               </el-dialog>
               <el-dialog title="借阅记录修改" :visible.sync="updateFormVisible">
                  <el-form :model="updateForm" label-position="right" label-width="150px">
                     <el-form-item label="RecordID">
                        <el-input v-model.number="updateForm.RecordID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="BookID">
                        <el-input v-model.number="updateForm.BookID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="BorrowDate">
                        <el-input v-model="updateForm.BorrowDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="ReturnDate">
                        <el-input v-model="updateForm.ReturnDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="DueDate">
                        <el-input v-model="updateForm.DueDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="IsOverdue">
                        <el-radio v-model="updateForm.IsOverdue" label='0'>未逾期</el-radio>
                        <el-radio v-model="updateForm.IsOverdue" label='1'>逾期</el-radio>
                     </el-form-item>
                     <el-form-item label="UserID">
                        <el-input v-model="updateForm.UserID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="BorrowerName">
                        <el-input v-model="updateForm.BorrowerName" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="updateFormVisible = false;">取 消</el-button>
                     <el-button type="primary" @click="updateConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
               <el-dialog title="借阅记录添加" :visible.sync="addFormVisible">
                  <el-form :model="addForm" label-position="right" label-width="150px">
                     <el-form-item label="BookID">
                        <el-input v-model.number="addForm.BookID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="BorrowDate">
                        <el-input v-model="addForm.BorrowDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="ReturnDate">
                        <el-input v-model="addForm.ReturnDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="DueDate">
                        <el-input v-model="addForm.DueDate" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="UserID">
                        <el-input v-model="addForm.UserID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="BorrowerName">
                        <el-input v-model="addForm.BorrowerName" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="updateFormVisible = false;">取 消</el-button>
                     <el-button type="primary" @click="addConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
            </section>

            <!--==================== SERVICES ====================-->
            <section class="services section">
               <div class="services__container container grid">
                  <article class="services__card">
                     <i class="ri-truck-line"></i>
                     <h3 class="services__title">Free Shipping</h3>
                     <p class="services__description">Order More Than $100</p>
                  </article>

                  <article class="services__card">
                     <i class="ri-lock-2-line"></i>
                     <h3 class="services__title">Secure Payment</h3>
                     <p class="services__description">100% Secure Payment</p>
                  </article>

                  <article class="services__card">
                     <i class="ri-customer-service-2-line"></i>
                     <h3 class="services__title">24/7 Support</h3>
                     <p class="services__description">Call us anytime</p>
                  </article>
               </div>
            </section>

            <!--==================== FEATURED ====================-->
            <section class="featured section" id="featured">
               <h2 class="section__title">
                  Featured Books
               </h2>
               <div class="btnbbox">
                  <button class="button add" @click="addBook()">Add</button>
                  <button class="button watch" @click="openTable()">WatchAll</button>
                  <button class="button watch" @click="openSearch()">SearchAuthorBook</button>
                  <button class="button hot" @click="getHot()">Top10</button>
                  <div class="button">书籍总数：{{ bookCounts||'暂时无法获取' }}</div>
               </div>
               <div class="featured__container container">
                  <div class="featured__swiper swiper">
                     <div class="swiper-wrapper">
                        <article class="featured__card swiper-slide" v-for="(book, index) in books" :key="book.BookID">
                           <img :src=`assets/img/${book.Title}.jpg` alt="image" class="featured__img">
                           
                           <h2 class="featured__title">{{ book.Title }}</h2>
                           <div class="featured__categorys">
                              <span class="featured__categorylabel">类别:</span>
                              <span class="featured__category">{{ book.Category }}</span>
                           </div>
                           <div class="btnbox">
                              <button class="button watch" @click="openTable(book.BookID)">Watch</button>
                              <button class="button delete" @click="deleteBook(book.BookID)">Delete</button>
                              <button class="button update" @click="updateBook(book.BookID)">Update</button>
                           </div>
                           <div class="featured__actions">
                              <button><i class="ri-search-line"></i></button>
                              <button><i class="ri-heart-3-line"></i></button>
                              <button><i class="ri-eye-line"></i></button>
                           </div>
                        </article>
                     </div>

                     <div class="swiper-button-prev">
                        <i class="ri-arrow-left-s-line"></i>
                     </div>
                     <div class="swiper-button-next">
                        <i class="ri-arrow-right-s-line"></i>
                     </div>
                  </div>
               </div>
               <el-dialog title="书本信息" :visible.sync="watchTableVisible">
                  <el-table :data="book" :header-cell-style="{'text-align':'center'}" :cell-style="{ 'text-align': 'center' }" stripe fit>
                    <el-table-column property="BookID" label="BookID"></el-table-column>
                    <el-table-column property="Title" label="Title"></el-table-column>
                    <el-table-column property="AuthorID" label="AuthorID"></el-table-column>
                    <el-table-column property="PublisherID" label="PublisherID"></el-table-column>
                    <el-table-column property="PublicationYear" label="PublicationYear"></el-table-column>
                    <el-table-column property="Category" label="Category"></el-table-column>
                    <el-table-column property="IsBorrowed" label="IsBorrowed"></el-table-column>
                    <el-table-column property="BorrowedCounts" label="BorrowedCounts"></el-table-column>
                    <el-table-column property="Description" label="Description"></el-table-column>
                  </el-table>
               </el-dialog>
               <el-dialog title="书本信息修改" :visible.sync="updateFormVisible">
                  <el-form :model="updateForm" label-position="right" label-width="150px">
                     <el-form-item label="Title">
                        <el-input v-model="updateForm.Title" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="AuthorID">
                        <el-input v-model="updateForm.AuthorID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="PublisherID">
                        <el-input v-model.number="updateForm.PublisherID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="PublicationYear">
                        <el-date-picker v-model="updateForm.PublicationYear" value-format="yyyy" type="year" placeholder="选出版年份">
                      </el-date-picker>
                     </el-form-item>
                     <el-form-item label="Category">
                        <el-select v-model="updateForm.Category" clearable placeholder="请选择分类">
                           <el-option
                             v-for="item in categoryOptions"
                             :key="item.value"
                             :label="item.label"
                             :value="item.value">
                           </el-option>
                        </el-select>
                     </el-form-item>
                     <el-form-item label="IsBorrowed">
                        <el-radio v-model="updateForm.IsBorrowed" label='0'>未借出</el-radio>
                        <el-radio v-model="updateForm.IsBorrowed" label='1'>已借出</el-radio>
                     </el-form-item>
                     <el-form-item label="Description">
                        <el-input type="textarea" v-model="updateForm.Description" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="updateFormVisible = false;updateBookId = ''">取 消</el-button>
                     <el-button type="primary" @click="updateBookConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
               <el-dialog title="新增书本" :visible.sync="addFormVisible">
                  <el-form :model="addForm" label-position="right" label-width="150px">
                     <el-form-item label="BookID">
                        <el-input v-model.number="addForm.BookID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="Title">
                        <el-input v-model="addForm.Title" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="AuthorID">
                        <el-input v-model.number="addForm.AuthorID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="PublisherID">
                        <el-input v-model.number="addForm.PublisherID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="PublicationYear">
                        <el-date-picker v-model="addForm.PublicationYear" value-format="yyyy" type="year" placeholder="选出版年份">
                      </el-date-picker>
                     </el-form-item>
                     <el-form-item label="Category">
                        <el-select v-model="addForm.Category" clearable placeholder="请选择分类">
                           <el-option
                             v-for="item in categoryOptions"
                             :key="item.value"
                             :label="item.label"
                             :value="item.value">
                           </el-option>
                        </el-select>
                     </el-form-item>
                     <el-form-item label="IsBorrowed">
                        <el-radio v-model="addForm.IsBorrowed" label="0">未借出</el-radio>
                        <el-radio v-model="addForm.IsBorrowed" label="1">已借出</el-radio>
                     </el-form-item>
                     <el-form-item label="Description">
                        <el-input type="textarea" v-model="addForm.Description" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="addFormVisible = false;">取 消</el-button>
                     <el-button type="primary" @click="addBookConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
               <el-dialog title="书本信息查询" :visible.sync="searchFormVisible">
                  <el-form :model="searchForm" label-position="right" label-width="210px">
                     <el-form-item label="AuthorName or BookName">
                        <el-input v-model="searchForm.AuthorName" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="searchFormVisible = false;searchForm.AuthorName=''">取 消</el-button>
                     <el-button type="primary" @click="searchByName()">搜 索</el-button>
                  </div>
               </el-dialog>
            </section>

            <!--==================== DISCOUNT ====================-->
            <section class="discount section" id="discount">
               <div class="discount__container container grid">
                  <div class="discount__data">
                     <h2 class="discount__title section__title">
                        Enjoy It!
                     </h2>
      
                     <p class="discount__description">
                        Take advantage of the reading days we 
                        have for you, read books from your favorite 
                        writers, the more you read, the more 
                        enjoy we have for you.
                     </p>
      
                     <a href="#" class="button">Enjoy Now</a>
                  </div>

                  <div class="discount__images">
                     <img src="assets/img/discount-book-1.png" alt="image" class="discount__img-1">
                     <img src="assets/img/discount-book-2.png" alt="image" class="discount__img-2">
                  </div>
               </div>
            </section>

            <!--==================== NEW BOOKS ====================-->
            <section class="new section" id="new">
               <h2 class="section__title">
                  New Books
               </h2>

               <div class="new__container container">
                  <div class="new__swiper swiper">
                     <div class="swiper-wrapper">
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-1.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-2.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-3.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文集</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-4.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-5.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-6.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-7.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文集</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-8.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-9.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-10.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">散文</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
                     </div>
                  </div>

                  <div class="new__swiper swiper">
                     <div class="swiper-wrapper">
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-10.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-9.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-8.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-7.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-6.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-5.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-4.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-3.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-2.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
      
                        <a href="#" class="new__card swiper-slide">
                           <img src="assets/img/book-1.png" alt="image" class="new__img">
                        
                           <div>
                              <h2 class="new__title">New Book</h2>
                              <div class="new__prices">
                                 <span class="new__discount">类别:</span>
                                 <span class="new__price">小说</span>
                              </div>
      
                              <div class="new__stars">
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-fill"></i>
                                 <i class="ri-star-half-fill"></i>
                              </div>
                           </div>
                        </a>
                     </div>
                  </div>
               </div>
            </section>

            <!--==================== JOIN ====================-->
            <section class="join section">
               <div class="join__container">
                  <img src="assets/img/join-bg.jpg" alt="image" class="join__bg">
               
                  <div class="join__data container grid">
                     <h2 class="join__title section__title">
                        订阅接收 <br>
                        The Latest Updates
                     </h2>

                     <form action="" class="join__form">
                        <input type="emial" placeholder="输入邮箱" class="join__input">
                        <button type="submit" class="join__button button">订阅</button>
                     </form>
                  </div>
               </div>
            </section>

            <!--==================== author ====================-->
            <section class="author section" id="author">
               <h2 class="section__title">
                  Reader Options
               </h2>
               <div class="btnbbox">
                  <button class="button add" @click="addAuthor()">Add</button>
                  <button class="button watch" @click="openTable()">WatchAll</button>
                  <button class="button watch" @click="openSearch()">SearchAuthorInfo</button>
                  <div class="button">作者总数：{{ authorCounts||'暂时无法获取' }}</div>
               </div>
               <div class="author__container container">
                  <div class="author__swiper swiper">
                     <div class="swiper-wrapper">
                        <article class="author__card swiper-slide" v-for="author in authors" :key="author.AuthorID">
                           <img :src=`assets/img/${author.AuthorName}.jpg` alt="image" class="author__img">
                        
                           <h2 class="author__title">{{ author.AuthorName }}</h2>
                           <p class="author__description">{{ author.ResearchArea }}</p>
                           <div class="btnbox">
                              <button class="button watch" @click="openTable(author.AuthorID)">Watch</button>
                              <button class="button delete" @click="deleteAuthor(author.AuthorID)">Delete</button>
                              <button class="button updateauthor" @click="updateAuthor(author.AuthorID)">Update</button>
                           </div>
                        </article>
                     </div>
                  </div>
               </div>
               <el-dialog title="新增作者" :visible.sync="addFormVisible">
                  <el-form :model="authorForm" label-position="right" label-width="150px">
                     <el-form-item label="AuthorID">
                        <el-input v-model.number="authorForm.AuthorID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="AuthorName">
                        <el-input v-model="authorForm.AuthorName" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="ResearchArea">
                        <el-input v-model="authorForm.ResearchArea" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="addFormVisible = false;">取 消</el-button>
                     <el-button type="primary" @click="addAuthorConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
               <el-dialog title="作者信息" :visible.sync="watchTableVisible">
                  <el-table :header-cell-style="{'text-align':'center'}" :cell-style="{ 'text-align': 'center' }" :data="author" stripe fit>
                    <el-table-column property="AuthorID" label="AuthorID"></el-table-column>
                    <el-table-column property="AuthorName" label="AuthorName"></el-table-column>
                    <el-table-column property="ResearchArea" label="ResearchArea"></el-table-column>
                  </el-table>
               </el-dialog>
               <el-dialog title="作者信息修改" :visible.sync="updateFormVisible">
                  <el-form :model="updateForm" label-position="right" label-width="150px">
                     <el-form-item label="AuthorID">
                        <el-input v-model.number="updateForm.AuthorID" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="AuthorName">
                        <el-input v-model="updateForm.AuthorName" autocomplete="off"></el-input>
                     </el-form-item>
                     <el-form-item label="ResearchArea">
                        <el-input v-model="updateForm.ResearchArea" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="updateFormVisible = false; updateAuthorID = '' ">取 消</el-button>
                     <el-button type="primary" @click="updateAuthorConfirm()">确 定</el-button>
                  </div>
               </el-dialog>
               <el-dialog title="作者信息查询" :visible.sync="searchFormVisible">
                  <el-form :model="searchForm" label-position="right" label-width="150px">
                     <el-form-item label="AuthorName">
                        <el-input v-model="searchForm.AuthorName" autocomplete="off"></el-input>
                     </el-form-item>
                  </el-form>
                  <div slot="footer" class="dialog-footer">
                     <el-button @click="searchFormVisible = false;searchForm.AuthorName=''">取 消</el-button>
                     <el-button type="primary" @click="searchByName()">搜 索</el-button>
                  </div>
               </el-dialog>
            </section>
         </main>

         <!--==================== FOOTER ====================-->
         <footer class="footer" id="footer">
            <div class="footer__container container grid">
               <div>
                  <a href="#" class="footer__logo">
                     <i class="ri-book-3-line"></i> Book
                  </a>

                  <p class="footer__description">
                     Find and explore the best <br>
                     Books from all your <br>
                     favorite writers.
                  </p>
               </div>

               <div class="footer__data grid">
                  <div>
                     <h3 class="footer__title">About</h3>

                     <ul class="footer__links">
                        <li>
                           <a href="#" class="footer__link">Awards</a>
                        </li>

                        <li>
                           <a href="#" class="footer__link">FAQS</a>
                        </li>

                        <li>
                           <a href="#" class="footer__link">Privacy policy</a>
                        </li>

                        <li>
                           <a href="#" class="footer__link">Terms of services</a>
                        </li>
                     </ul>
                  </div>

                  <div>
                     <h3 class="footer__title">Company</h3>

                     <ul class="footer__links">
                        <li>
                           <a href="#" class="footer__link">Blogs</a>
                        </li>

                        <li>
                           <a href="#" class="footer__link">Community</a>
                        </li>

                        <li>
                           <a href="#" class="footer__link">Our team</a>
                        </li>
                        
                        <li>
                           <a href="#" class="footer__link">Help center</a>
                        </li>
                     </ul>
                  </div>

                  <div>
                     <h3 class="footer__title">Contact</h3>

                     <ul class="footer__links">
                        <li>
                           <address class="footer__info">
                              FZU
                           </address>
                        </li>
                     </ul>
                  </div>

                  <div>
                     <h3 class="footer__title"></h3>

                     <div class="footer___social">
                        <a href="https://github.com/xiaoyangii" target="_blank" class="footer__social-link">
                           <i class="ri-github-line"></i>
                        </a>

                        <a href="https://www.facebook.com/" target="_blank" class="footer__social-link">
                           <i class="ri-facebook-circle-line"></i>
                        </a>

                        <a href="https://www.instagram.com/" target="_blank" class="footer__social-link">
                           <i class="ri-instagram-line"></i>
                        </a>
                     </div>
                  </div>
               </div>
            </div>

            <span class="footer__copy">
               &#169; All Rights Reserved By xxx
            </span>
         </footer>

         <!--========== SCROLL UP ==========-->
         <a href="#" class="scrollup" id="scroll-up">
            <i class="ri-arrow-up-line"></i>
         </a>
      </div>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script src="assets/js/vue.js"></script>
      <!-- 引入组件库 -->
      <script src="https://unpkg.com/element-ui/lib/index.js"></script>
      <!--=============== SCROLLREVEAL ===============-->
      <script src="assets/js/scrollreveal.min.js"></script>
      <!--=============== SWIPER JS ===============-->
      <script src="assets/js/swiper-bundle.min.js"></script>
      <!--=============== MAIN JS ===============-->
      <script src="assets/js/main.js"></script>
      <script type="text/javascript">
         Vue.config.productionTip = false
         var app1 = new Vue({
            el: '#featured',
            data: {
               baseUrl: 'http://127.0.0.1:3000',
               seen: true,
               bookCounts: '',
               books: [
               ],
               book: [],
               updateForm: {
                  Title: '',
                  AuthorID: '',
                  PublisherID: '',
                  PublicationYear: '',
                  Category: '',
                  IsBorrowed: '',
                  Description: '',
               },
               categoryOptions: [{
                  value: '小说',
                  label: '小说'
               }, {
                  value: '散文',
                  label: '散文'
               }, {
                  value: '散文集',
                  label: '散文集'
               }, {
                  value: '诗歌',
                  label: '诗歌'
               }, {
                  value: '戏剧',
                  label: '戏剧'
               }],
               updateBookId: '',
               addForm: {
                  BookID: '',
                  Title: '',
                  AuthorID: '',
                  PublisherID: '',
                  PublicationYear: '',
                  Category: '',
                  IsBorrowed: '',
                  Description: '',
               },
               searchForm: {
                  AuthorName: '',
               },
               watchTableVisible: false,
               updateFormVisible: false,
               addFormVisible: false,
               searchFormVisible: false,
               formLabelWidth: '120px',
               labelPosition: 'right',
            },
            methods: {
               async getBookCounts() {
                  await axios.get(`${this.baseUrl}/bookCounts`)
                  .then( res => {
                     if(res.status === 200) {
                        this.bookCounts = res.data[0].TotalBooks
                     }
                     console.log(res)
                  })
               },
               openTable(id) {
                  this.watchTableVisible = true
                  if(id) {
                     this.book = []
                     this.getBook(id)
                  }
               },
               openSearch() {
                  this.searchFormVisible = true
               },
               async searchByName() {
                  await axios.post(`${this.baseUrl}/bookauthor`, this.searchForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.book = []
                        this.book = res.data[0]
                        this.watchTableVisible = true
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               async getHot() {
                  await axios.get(`${this.baseUrl}/hotbook`)
                  .then( res => {
                     console.log(res)
                     if(res.status === 200) {
                        this.book = res.data
                        this.watchTableVisible = true
                     }
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               async getBook(id) {
                  await axios.get(`${this.baseUrl}/book/${id}`)
                  .then( res => {
                     if(res.status === 200) {
                        this.book = []
                        this.book = res.data
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               async getBooks() {
                  await axios.get(`${this.baseUrl}/book`)
                  .then( res => {
                     if(res.status === 200) {
                        this.book = []
                        this.books = res.data
                        this.book = res.data
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               deleteBook(id) {
                  this.$confirm('此操作将永久删除该书本, 是否继续?', '提示', {
                     confirmButtonText: '确定',
                     cancelButtonText: '取消',
                     type: 'warning'
                  }).then(async() => {
                     await axios.delete(`${this.baseUrl}/book/${id}`)
                     .then( res => {
                        if(res.status === 200) {
                           this.books = this.books.filter(item => item.BookID !== id)
                           this.$message({
                              type: 'success',
                              message: '删除成功!'
                           })
                        }
                        console.log(res)
                     })
                     .catch( err => {
                        console.log(err)
                     })
                  }).catch(() => {
                     this.$message({
                        type: 'info',
                        message: '已取消删除'
                     })          
                  })
               },
               updateBook(id) {
                  this.updateFormVisible = true
                  this.updateBookId = id
                  // 先将对应updateBookId的数据赋值给updateForm
                  this.books.forEach(item => {
                     if (item.BookID === this.updateBookId) {
                        this.updateForm = item
                        this.updateForm.PublicationYear = item.PublicationYear.toString()
                        this.updateForm.IsBorrowed = item.IsBorrowed.toString()
                     }
                  })
               },
               async updateBookConfirm() {
                  await axios.put(`${this.baseUrl}/book/${this.updateBookId}`, this.updateForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.$message({
                           type: 'success',
                           message: '修改成功!'
                        })
                        this.books.forEach(item => {
                           if (item.BookID === this.updateBookId) {
                              item = this.updateForm
                           }
                        })
                        this.updateFormVisible = false
                        this.updateBookId = ''
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               addBook() {
                  this.addFormVisible = true
               },
               async addBookConfirm() {
                  await axios.post(`${this.baseUrl}/book`, this.addForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.books.push(this.addForm)
                        this.addForm = {
                           BookID: '',
                           Title: '',
                           AuthorID: '',
                           PublisherID: '',
                           PublicationYear: '',
                           Category: '',
                           IsBorrowed: '',
                           Description: '',
                        }
                        this.$message({
                           type: 'success',
                           message: '添加成功!'
                        })
                        this.addFormVisible = false
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               }
            },
            mounted() {
               let swiperFeatured = new Swiper('.featured__swiper', {
                  loop: false,
                  spaceBetween: 16,
                  grabCursor: true,
                  slidesPerView: 'auto',
                  centeredSlides: 'auto',
                  
                  navigation: {
                     nextEl: '.swiper-button-next',
                     prevEl: '.swiper-button-prev',
                  },
                  breakpoints: {
                     1150: {
                        slidesPerView: 4,
                        centeredSlides: false,
                     },
                  },
               })
               sr.reveal(`.featured__container, .new__container, .join__data, .footer`)
               sr.reveal(`.services__card`, { interval: 600 })
               sr.reveal(`.discount__data`, { origin: 'left' })
               sr.reveal(`.discount__images`, { origin: 'right' })
            },
            created() {
               this.getBooks()
               this.getBookCounts()
            },
         })
         var app2 = new Vue({
            el: '#author',
            data: {
               baseUrl: 'http://127.0.0.1:3000',
               authorCounts: '',
               authors: [
               ],
               author: [],
               authorForm: {
                  AuthorID: '',
                  AuthorName: '',
                  ResearchArea: '',
               },
               updateForm: {
                  AuthorID: '',
                  AuthorName: '',
                  ResearchArea: '',
               },
               searchForm: {
                  AuthorName: '',
               },
               updateAuthorID: '',
               addFormVisible: false,
               watchTableVisible: false,
               updateFormVisible: false,
               searchFormVisible: false,
            },
            methods: {
               async getAuthorCounts() {
                  await axios.get(`${this.baseUrl}/authorCounts`)
                  .then( res => {
                     if(res.status === 200) {
                        this.authorCounts = res.data[0].TotalAuthors
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               openTable(id) {
                  if(id) {
                     this.author = []
                     this.getAuthor(id)
                  }
                  this.watchTableVisible = true
               },
               openSearch() {
                  this.searchFormVisible = true
               },
               async searchByName() {
                  await axios.post(`${this.baseUrl}/authorname`, this.searchForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.author = []
                        this.author = res.data[0]
                        this.watchTableVisible = true
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               async getAuthor(id) {
                  await axios.get(`${this.baseUrl}/author/${id}`)
                  .then( res => {
                     if(res.status === 200) {
                        this.author = res.data
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               async getAuthors() {
                  await axios.get(`${this.baseUrl}/author`)
                  .then( res => {
                     if(res.status === 200) {
                        this.authors = res.data
                        this.author = res.data
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               addAuthor() {
                  this.addFormVisible = true
               },
               async addAuthorConfirm() {
                  await axios.post(`${this.baseUrl}/author`, this.authorForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.authors.push(this.authorForm)
                        this.authorForm = {
                           AuthorID: '',
                           AuthorName: '',
                           ResearchArea: '',
                        }
                        this.$message({
                           type: 'success',
                           message: '添加成功!'
                        })
                     }
                     console.log(res)
                     this.addFormVisible = false
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               deleteAuthor(id) {
                  this.$confirm('此操作将永久删除该作者, 是否继续?', '提示', {
                     confirmButtonText: '确定',
                     cancelButtonText: '取消',
                     type: 'warning'
                  }).then(async() => {
                     await axios.delete(`${this.baseUrl}/author/${id}`)
                     .then(res => {
                        if(res.status === 200) {
                           this.$message({
                              type: 'success',
                              message: '删除成功!'
                           })
                           this.authors = this.authors.filter(item => item.AuthorID !== id)
                        }
                        console.log(res)
                     })
                     .catch(err => {
                        console.log(err)
                     })
                  }).catch(() => {
                     this.$message({
                        type: 'info',
                        message: '已取消删除'
                     })          
                  })
               },
               updateAuthor(id) {
                  this.updateFormVisible = true
                  this.updateAuthorID = id
                  // 先将对应updateAuthorID的数据赋值给updateForm
                  this.authors.forEach(item => {
                     if (item.AuthorID === this.updateAuthorID) {
                        this.updateForm = item
                     }
                  })
               },
               async updateAuthorConfirm() {
                  await axios.put(`${this.baseUrl}/author/${this.updateAuthorID}`, this.updateForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.authors.forEach(item => {
                           if (item.AuthorID === this.updateAuthorID) {
                              item = this.updateForm
                           }
                        })
                        this.updateFormVisible = false
                        this.$message({
                           type: 'success',
                           message: '修改成功!'
                        })
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               }
            },
            created() {
               this.getAuthors()
               this.getAuthorCounts()
            },
            mounted() {
               let swiperAuthor = new Swiper('.author__swiper', {
                  loop: true,
                  spaceBetween: 16,
                  grabCursor: true,
                  slidesPerView: 'auto',
                  centeredSlides: 'auto',
                  breakpoints: {
                     1150: {
                        slidesPerView: 3,
                        centeredSlides: false,
                     },
                  },
               })
               sr.reveal(`.author__container`)
            }
         })
         var app3 = new Vue({
            el: '#home',
            data: {
               baseUrl: 'http://127.0.0.1:3000',
               recordCounts: '',
               borrowRecords: [
               ],
               tableVisible: false,
               updateFormVisible: false,
               addFormVisible: false,
               addForm: {
                  BookID: '',
                  BorrowDate: '',
                  ReturnDate: '',
                  DueDate: '',
                  UserID: '',
                  BorrowerName: ''
               },
               updateForm: {
                  RecordID: '',
                  BookID: '',
                  BorrowDate: '',
                  ReturnDate: '',
                  DueDate: '',
                  IsOverdue: '',
                  UserID: '',
                  BorrowerName: ''
               }
            },
            mounted(){
               let swiperHome = new Swiper('.home__swiper', {
                  loop: true,
                  spaceBetween: -24,
                  grabCursor: true,
                  slidesPerView: 'auto',
                  centeredSlides: 'auto',
                  autoplay: {
                     delay: 3000,
                     disableOnInteraction: false,
                  },
                  breakpoints: {
                     1220: {
                        spaceBetween: -32,
                     },
                  },
               })
               sr.reveal(`.home__data`)
               sr.reveal(`.home__images`, { delay: 600 })
            },
            methods: {
               async getRecordCounts() {
                  await axios.get(`${this.baseUrl}/recordCounts`)
                  .then( res => {
                     if(res.status === 200) {
                        this.recordCounts = res.data[0].TotalRecords
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               openTable() {
                  this.tableVisible = true
               },
               async getBorrowRecords() {
                  await axios.get(`${this.baseUrl}/borrowRecord`)
                  .then( res => {
                     if(res.status === 200) {
                        this.borrowRecords = res.data
                        // 截取时间字符串T前的日期
                        this.borrowRecords.forEach(item => {
                           item.BorrowDate = item.BorrowDate.split('T')[0]
                           item.ReturnDate = item.ReturnDate.split('T')[0]
                           item.DueDate = item.DueDate.split('T')[0]
                        })
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               },
               handleEdit(index, row) {
                  this.updateForm = {}
                  this.updateForm = row
                  this.updateForm.IsOverdue = this.updateForm.IsOverdue.toString()
                  this.updateFormVisible = true
               },
               async updateConfirm() {
                  this.updateForm.IsOverdue = parseInt(this.updateForm.IsOverdue)
                  await axios.put(`${this.baseUrl}/borrowRecord/${this.updateForm.RecordID}`, this.updateForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.borrowRecords.forEach(item => {
                           if (item.RecordID === this.updateForm.RecordID) {
                              item = this.updateForm
                           }
                        })
                        this.updateFormVisible = false
                        this.$message({
                           type: 'success',
                           message: '修改成功!'
                        })
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               
               },
               handleDelete(index, row) {
                  this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {
                     confirmButtonText: '确定',
                     cancelButtonText: '取消',
                     type: 'warning'
                  }).then(async() => {
                     await axios.delete(`${this.baseUrl}/borrowRecord/${row.RecordID}`)
                     .then(res => {
                        if(res.status === 200) {
                           this.$message({
                              type: 'success',
                              message: '删除成功!'
                           })
                           this.borrowRecords = this.borrowRecords.filter(item => item.RecordID !== row.RecordID)
                        }
                        console.log(res)
                     })
                     .catch(err => {
                        console.log(err)
                     })
                  }).catch(() => {
                     this.$message({
                        type: 'info',
                        message: '已取消删除'
                     })          
                  })
               },
               handleAdd() {
                  this.addFormVisible = true
               },
               async addConfirm() {
                  await axios.post(`${this.baseUrl}/borrowRecord`, this.addForm, {
                     headers: {
                        'Content-Type': 'application/json'
                     }
                  })
                  .then( res => {
                     if(res.status === 200) {
                        this.borrowRecords.push(this.addForm)
                        this.addForm = {
                           BookID: '',
                           BorrowDate: '',
                           ReturnDate: '',
                           DueDate: '',
                           UserID: '',
                           BorrowerName: ''
                        }
                        this.$message({
                           type: 'success',
                           message: '添加成功!'
                        })
                        this.addFormVisible = false
                     }
                     console.log(res)
                  })
                  .catch( err => {
                     console.log(err)
                  })
               }
            },
            created() {
               this.getBorrowRecords()
               this.getRecordCounts()
            }
         })
     </script>
   </body>
</html>